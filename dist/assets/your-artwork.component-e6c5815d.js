import{H as B,_ as f,g as I,B as u,h,o as r,c,a as e,i as p,j as S,F as g,r as w,f as T,t as d,p as x,e as y}from"./index-38f6e732.js";class A extends B{constructor(){super(),this.baseGet="chapters"}}const C={name:"your-artwork",computed:{...I(["profile","isAuthenticated"])},data(){return{publishedBooks:[],book:{booksId:"",booksImage:"",booksTitle:"",booksDate:"",chaptersNumber:0}}},async created(){this.bookService=new u,this.chapterService=new A,await this.getPublishedBooks()},methods:{async getPublishedBooks(){let t=await this.bookService.getAll(),a=await this.chapterService.getAll();for(let o of t.data)if(this.profile.id===o.profileId){this.book={booksId:o.id,booksImage:o.thumbnailUrl,booksTitle:o.title,booksDate:o.publishedAt,chaptersNumber:0};for(let l of a.data)o.id===l.book.id&&(this.book.chaptersNumber+=1);this.publishedBooks.push(this.book)}},showBookInfo(t){this.$router.push({name:"book-item",params:{id:t.id}})},async deleteBook(t){await new u().delete(t.booksId);const o=this.publishedBooks.findIndex(l=>l.booksId===t.booksId);o!==-1&&this.publishedBooks.splice(o,1)},saveBook(){this.$router.push({name:"create"})}}},n=t=>(x("data-v-0b363859"),t=t(),y(),t),N=n(()=>e("h1",{class:"text-center"},"Every story begins with a single WORD",-1)),H=n(()=>e("h3",null,"Your Work",-1)),D=n(()=>e("th",null,"PHOTO",-1)),E=n(()=>e("th",null,"TITLE",-1)),O=n(()=>e("th",null,"NUMBER OF CHAPTERS",-1)),P=n(()=>e("th",null,"PUBLICATION DATE",-1)),L=["src","alt","onClick"];function U(t,a,o,l,b,i){const k=h("TH"),_=h("pv-button");return r(),c("div",null,[N,H,e("button",{onClick:a[0]||(a[0]=(...s)=>i.saveBook&&i.saveBook(...s)),class:"p-button p-button-rounded p-button-success"},"PUBLISH"),e("table",null,[e("thead",null,[e("tr",null,[D,E,O,P,p(k,null,{default:S(()=>[T("ACTIONS")]),_:1})])]),e("tbody",null,[(r(!0),c(g,null,w(b.publishedBooks,(s,m)=>(r(),c("tr",{key:m},[e("td",null,[e("img",{class:"img-container",src:s.booksImage,alt:s.booksTitle,onClick:v=>i.showBookInfo(s)},null,8,L)]),e("td",null,d(s.booksTitle),1),e("td",null,d(s.chaptersNumber),1),e("td",null,d(s.booksDate),1),e("td",null,[p(_,{icon:"pi pi-trash",class:"p-button-text p-button-rounded",onClick:v=>i.deleteBook(s)},null,8,["onClick"])])]))),128))])])])}const R=f(C,[["render",U],["__scopeId","data-v-0b363859"]]);export{R as default};
